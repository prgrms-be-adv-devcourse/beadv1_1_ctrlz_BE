## ğŸ¥” **ì—°ê·¼ë§ˆì¼“**

í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ë°±ì—”ë“œ ì‹¬í™”ê³¼ì • 1ê¸° **Ctrl+Z íŒ€**ì˜ ë°±ì—”ë“œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

### ğŸ‘¥ Member

|                **ê¹€ìƒì•„**                 |                   **ì˜¥ì •í˜„**                   |                   **ì´ê±´ë¯¼**                   |                 **ì´ì¤€í˜¸**                  |                 **ìµœë¯¼ì„**                  |
| :-----------------------------------------: | :-----------------------------------------: | :-----------------------------------------: | :-----------------------------------------: | :-----------------------------------------: |
| <img src="https://github.com/shark-coding.png" width="200"> | <img src="https://github.com/okjunghyeon.png" width="200"> | <img src="https://github.com/Leegeonmin.png" width="200"> | <img src="https://github.com/iamian815.png" width="200"> | <img src="https://github.com/choizz156.png" width="200"> |
|                 **PO**                 |                     **BE**                     |                     **BE**                     |                   **BE**                    |                   **BE**                    |
|   [GitHub](https://github.com/shark-coding)    |   [GitHub](https://github.com/okjunghyeon)    |   [GitHub](https://github.com/Leegeonmin)    |   [GitHub](https://github.com/iamian815)    |   [GitHub](https://github.com/choizz156)    |

---

### ğŸ“Œ í”„ë¡œì íŠ¸ëª…

<img src="https://github.com/user-attachments/assets/7a4cb746-e77e-4e51-ab71-0fb5039ee40c" width="387" height="204" />

**yeongeunMarket â€” ì¤‘ê³  ìƒí’ˆ ê±°ë˜ ì´ì»¤ë¨¸ìŠ¤ í”Œë«í¼**

### ğŸ“š í”„ë¡œì íŠ¸ ì†Œê°œ

> **ê°œì¸ ê°„ ì‹ ë¢° ê¸°ë°˜ì˜ ì¤‘ê³ ê±°ë˜ í”Œë«í¼**  
> ì˜ˆì¹˜ê¸ˆ ì‹œìŠ¤í…œê³¼ ì‹¤ì‹œê°„ ê²€ìƒ‰ì„ ê°–ì¶˜ ì•ˆì „í•œ ê±°ë˜ í™˜ê²½ ì œê³µ  
> Spring Cloud MSA + Kafka + Elasticsearch + Toss Payments ê¸°ë°˜ ì‹¤ë¬´í˜• í”„ë¡œì íŠ¸

#### ğŸ¯ ë¬¸ì œì  ë° í•™ìŠµ ëª©í‘œ
- í‚¤ì›Œë“œ ê¸°ë°˜ ì‹¤ì‹œê°„ ê²€ìƒ‰ ë° ìë™ì™„ì„± í’ˆì§ˆ/ì†ë„ì˜ í•œê³„ (RDB ê¸°ë°˜ ê²€ìƒ‰)
- ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ì˜ ì¥ì•  ì „íŒŒì™€ í™•ì¥ì„± ë¶€ì¡±
- ì¤‘ê³ ê±°ë˜ ê²°ì œÂ·ì •ì‚° ì‹œ ë°œìƒí•˜ëŠ” ê¸ˆì•¡ ë¬¸ì œ í•´ê²°
- ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ì˜ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬, íš¨ìœ¨ì  ì •ì‚° ê´€ë¦¬ í•„ìš”

#### ğŸ—ï¸ ê¸°ìˆ  ì ìš©
- **Elasticsearch**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì‹¤ì‹œê°„ ê²€ìƒ‰Â·ìë™ì™„ì„±, More Like This ìœ ì‚¬ ìƒí’ˆ ì¶”ì²œ, Function Score ê¸°ë°˜ ì¼ì¼ ì¶”ì²œ
- **Spring Cloud MSA**: 6ê°œ ë„ë©”ì¸ ì„œë¹„ìŠ¤ ë¶„ë¦¬ ë° ë…ë¦½ ìš´ì˜, ì¥ì•  ì „íŒŒ ìµœì†Œí™”
- **Kafka ì´ë²¤íŠ¸ ì„¤ê³„**: ì£¼ë¬¸-ê²°ì œ-ì •ì‚° ë“± ë„ë©”ì¸ ê°„ ë¹„ë™ê¸° í†µì‹ , ëŠìŠ¨í•œ ê²°í•© ë° í™•ì¥
- **ì˜ˆì¹˜ê¸ˆ ê²°ì œ ì‹œìŠ¤í…œ & Toss ì—°ë™**: ë³µí•© ê²°ì œ(ì˜ˆì¹˜ê¸ˆ+PG) í”„ë¡œì„¸ìŠ¤ ì§ì ‘ êµ¬í˜„, ë©±ë“±ì„± ë³´ì¥
- **Spring Batch**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ë°°ì¹˜ ì²˜ë¦¬, ì •ì‚° ìë™í™” (PENDING â†’ WAITING â†’ COMPLETED)
- **CI/CD & Kubernetes**: GitHub Actionsì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ ìë™í™”ëœ ë¬´ì¤‘ë‹¨ ë°°í¬
- **OAuth2 ì¸ì¦**: êµ¬ê¸€ ë¡œê·¸ì¸ ì—°ë™, JWT ê¸°ë°˜ í† í° ê´€ë¦¬ (HttpOnly Cookie)

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“Š API í†µê³„
**ì´ ì•½ 80ê°œì˜ REST API** êµ¬í˜„ (Swagger ë¬¸ì„œí™” ì™„ë£Œ)

| ì„œë¹„ìŠ¤ | API ê°œìˆ˜ | í¬íŠ¸ | ì£¼ìš” ê¸°ëŠ¥ |
|--------|----------|------|-----------|
| **Account Service** | 14ê°œ | 8080 | íšŒì›, ì¸ì¦, íŒë§¤ì ê¶Œí•œ |
| **Domain Service** | 50ê°œ+ | 8081 | ìƒí’ˆ, ì£¼ë¬¸, ë¦¬ë·°, ê²€ìƒ‰ |
| **Payment Service** | 8ê°œ | 8084 | ê²°ì œ, í™˜ë¶ˆ, ì˜ˆì¹˜ê¸ˆ |
| **Settlement Service** | 5ê°œ | - | ì •ì‚°, ë°°ì¹˜ |
| **Search Service** | 1ê°œ | - | ê²€ìƒ‰ ë°°ì¹˜ |
| **AI Service** | 1ê°œ | - | AI ì¶”ì²œ |

### ğŸ” Account Service - íšŒì› ë° ì¸ì¦

#### ì¸ì¦ (Auth)
- [x] OAuth 2.0 Google ë¡œê·¸ì¸ (isNewUser ë¶„ê¸° ì²˜ë¦¬)
- [x] Access Token ì¬ë°œê¸‰ (Refresh Token ê¸°ë°˜)
- [x] ë¡œê·¸ì•„ì›ƒ (Redis Token ì‚­ì œ + Cookie ë§Œë£Œ)
- [x] JWT í† í° ê´€ë¦¬ (HttpOnly Cookie ë°©ì‹)

#### íšŒì› ê´€ë¦¬ (User)
- [x] íšŒì›ê°€ì… (ê°€ì… ì‹œ í† í° ìë™ ë°œê¸‰)
- [x] íšŒì›ì •ë³´ ì¡°íšŒ (ë‚´ ì •ë³´ / íŠ¹ì • ì‚¬ìš©ì)
- [x] íšŒì›ì •ë³´ ìˆ˜ì • (ë‹‰ë„¤ì„, ì „í™”ë²ˆí˜¸, ì£¼ì†Œ)
- [x] í”„ë¡œí•„ ì´ë¯¸ì§€ ê´€ë¦¬ (S3 ì—…ë¡œë“œ/êµì²´)

#### íŒë§¤ì ê¶Œí•œ
- [x] SMS ì¸ì¦ ì½”ë“œ ë°œì†¡ (6ìë¦¬)
- [x] ì¸ì¦ ì½”ë“œ ê²€ì¦ í›„ SELLER ê¶Œí•œ ë¶€ì—¬

### ğŸ›ï¸ Domain Service - í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤

#### ìƒí’ˆ ê²Œì‹œê¸€ (ProductPost)
- [x] ìƒí’ˆ ê²Œì‹œê¸€ CRUD (ì´ë¯¸ì§€ í¬í•¨)
- [x] ìƒí’ˆ ëª©ë¡ ì¡°íšŒ (ì „ì²´/ë‚´ ê²Œì‹œê¸€/ì¹´í…Œê³ ë¦¬ë³„)
- [x] ê±°ë˜ ìƒíƒœ ê´€ë¦¬ (SELLING â†’ PROCESSING â†’ SOLDOUT)
- [x] ì¡°íšŒìˆ˜ ì¦ê°€ ë° ë³¸ì¸ ì—¬ë¶€ í™•ì¸
- [x] Soft Delete ë°©ì‹ ì‚­ì œ

#### ì¹´í…Œê³ ë¦¬ & íƒœê·¸
- [x] ì¹´í…Œê³ ë¦¬ CRUD
- [x] íƒœê·¸ CRUD
- [x] ìƒí’ˆ-ì¹´í…Œê³ ë¦¬-íƒœê·¸ ì—°ê´€ ê´€ê³„ ê´€ë¦¬

#### ê´€ì‹¬ ìƒí’ˆ (Favorite)
- [x] ì°œí•˜ê¸° (ì¢‹ì•„ìš”) ë“±ë¡/ì·¨ì†Œ
- [x] ê´€ì‹¬ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
- [x] ì°œ ê°œìˆ˜ ì‹¤ì‹œê°„ ì§‘ê³„

#### ì¥ë°”êµ¬ë‹ˆ (Cart)
- [x] ì¥ë°”êµ¬ë‹ˆ ìƒì„± ë° ì¡°íšŒ
- [x] ìƒí’ˆ ì¶”ê°€/ì‚­ì œ
- [x] ì„ íƒ ìƒíƒœ ë³€ê²½ (ê²°ì œ ëŒ€ìƒ ì„ íƒ)

#### ì£¼ë¬¸ (Order)
- [x] ì£¼ë¬¸ ìƒì„± (ì¥ë°”êµ¬ë‹ˆ ê¸°ë°˜)
- [x] ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ
- [x] êµ¬ë§¤ì/íŒë§¤ì ì£¼ë¬¸ ëª©ë¡
- [x] ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬ (PAYMENT_PENDING â†’ PAYMENT_COMPLETED â†’ PURCHASE_CONFIRMED â†’ SETTLED)
- [x] êµ¬ë§¤ í™•ì • ì²˜ë¦¬
- [x] ì£¼ë¬¸ ì·¨ì†Œ

#### ë¦¬ë·° (Review)
- [x] ë¦¬ë·° ì‘ì„± (êµ¬ë§¤ ì™„ë£Œ ìƒí’ˆ ëŒ€ìƒ)
- [x] ë¦¬ë·° CRUD
- [x] ìƒí’ˆë³„/ì‚¬ìš©ìë³„ ë¦¬ë·° ì¡°íšŒ
- [x] 2ì¢… í‰ì  ì‹œìŠ¤í…œ (íŒë§¤ì í‰ì  + ìƒí’ˆ í‰ì )

### ğŸ” Search Service - Elasticsearch ê²€ìƒ‰

#### ìƒí’ˆ ê²€ìƒ‰ (ProductPost Search)
- [x] í†µí•© ê²€ìƒ‰ (í‚¤ì›Œë“œ ê¸°ë°˜)
- [x] ìœ ì‚¬ ìƒí’ˆ ì¶”ì²œ (More Like This Query)
- [x] ì˜¤ëŠ˜ì˜ ì¶”ì²œ ìƒí’ˆ (Function Score)
- [x] íŒë§¤ì ì •ë³´ ì¡°íšŒ ë° ì¶”ì²œ
- [x] ë‹¤ì¤‘ í•„í„°ë§ (ì¹´í…Œê³ ë¦¬/ê°€ê²©/ìƒíƒœ)

#### ê²€ìƒ‰ì–´ ê´€ë¦¬ (Search Word)
- [x] ê²€ìƒ‰ì–´ ì €ì¥ (Redis)
- [x] ìë™ì™„ì„± (ì ‘ë‘ì‚¬ ë§¤ì¹­)
- [x] ìµœê·¼ ê²€ìƒ‰ì–´ ì¡°íšŒ (ê°œì¸ë³„ ìµœëŒ€ 10ê°œ)
- [x] ìµœê·¼ ê²€ìƒ‰ì–´ ì‚­ì œ (ê°œë³„/ì „ì²´)
- [x] ì¸ê¸° ê²€ìƒ‰ì–´ Top N
- [x] AI ì¶”ì²œ ì‹œìŠ¤í…œ ì—°ë™ (ê²€ìƒ‰ íŒ¨í„´ ì´ë²¤íŠ¸ ë°œí–‰)

#### ê²€ìƒ‰ ë°°ì¹˜
- [x] Spring Batch ê¸°ë°˜ ê²€ìƒ‰ ì´ë ¥ ì²˜ë¦¬
- [x] ìˆ˜ë™ íŠ¸ë¦¬ê±° ë°©ì‹ ì§€ì›

### ğŸ’³ Payment Service - ê²°ì œ ë° ì˜ˆì¹˜ê¸ˆ

#### ê²°ì œ (Payment)
- [x] ê²°ì œ ì¤€ë¹„ ì •ë³´ ì¡°íšŒ (ì£¼ë¬¸ ê¸ˆì•¡ + ì˜ˆì¹˜ê¸ˆ ì”ì•¡)
- [x] Toss Payments ê²°ì œ ìŠ¹ì¸
- [x] ì˜ˆì¹˜ê¸ˆ ì „ì•¡ ê²°ì œ
- [x] ë³µí•© ê²°ì œ (ì˜ˆì¹˜ê¸ˆ + Toss)
- [x] ê²°ì œ í™˜ë¶ˆ (ìë™ ë¶„ê¸°: Toss/ì˜ˆì¹˜ê¸ˆ/ë³µí•©)
- [x] ë©±ë“±ì„± ë³´ì¥ (ì¤‘ë³µ ê²°ì œ ë°©ì§€)
- [x] ì •ì‚°ìš© ê²°ì œ ë‚´ì—­ ì¡°íšŒ

**ê²°ì œ íƒ€ì…**
- `TOSS`: Toss Payments ì „ì•¡
- `DEPOSIT`: ì˜ˆì¹˜ê¸ˆ ì „ì•¡
- `DEPOSIT_TOSS`: ë³µí•© ê²°ì œ

#### ì˜ˆì¹˜ê¸ˆ (Deposit)
- [x] ì˜ˆì¹˜ê¸ˆ ê³„ì¢Œ ìƒì„± (ì´ˆê¸° ì”ì•¡ 0ì›)
- [x] ì˜ˆì¹˜ê¸ˆ ì”ì•¡ ì¡°íšŒ (ì—†ìœ¼ë©´ ìë™ ìƒì„±)
- [x] Toss ì—°ë™ ì¶©ì „ í™•ì •
- [x] ê²°ì œ ì‹œ ì˜ˆì¹˜ê¸ˆ ìš°ì„  ì°¨ê°
- [x] í™˜ë¶ˆ ì‹œ ì˜ˆì¹˜ê¸ˆ ìë™ ë³µêµ¬

### ğŸ’° Settlement Service - ì •ì‚°

#### ì •ì‚° ê´€ë¦¬
- [x] ì •ì‚° ë‚´ì—­ ì¡°íšŒ (ê°œë³„/ëª©ë¡/ì‚¬ìš©ìë³„)
- [x] ì •ì‚° ì‚­ì œ
- [x] Payment Service ì—°ë™ ì¡°íšŒ

#### ì •ì‚° ë°°ì¹˜ (Spring Batch)
- [x] ì •ì‚° ë°°ì¹˜ ìˆ˜ë™ ì‹¤í–‰ (íŠ¹ì • ê¸°ê°„)
- [x] íŒë§¤ìë³„ ì •ì‚° ê¸ˆì•¡ ê³„ì‚°
- [x] ìƒíƒœ ê´€ë¦¬ (PENDING â†’ WAITING â†’ COMPLETED/FAILED)
- [x] ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§

**ì •ì‚° í”„ë¡œì„¸ìŠ¤**
```
êµ¬ë§¤ í™•ì • â†’ SettlementCreatedEvent â†’ PENDING ìƒì„±
â†’ ë°°ì¹˜ ì‹¤í–‰ (100ê±´ì”©) â†’ DepositSettlementReadyEvent
â†’ ì˜ˆì¹˜ê¸ˆ ì²˜ë¦¬ â†’ SettlementResultEvent â†’ COMPLETED/FAILED
```

### ğŸ¤– AI Service - ìƒí’ˆ ì¶”ì²œ

- [x] Spring AI ê¸°ë°˜ ê°œì¸í™” ì¶”ì²œ
- [x] ì¿¼ë¦¬ ê¸°ë°˜ ìƒí’ˆ ì¶”ì²œ ìƒì„±
- [x] ì‚¬ìš©ì ê²€ìƒ‰ íŒ¨í„´ ë¶„ì„
- [x] Elasticsearch ì—°ë™ ìœ ì‚¬ ìƒí’ˆ ê²€ìƒ‰

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### ğŸ’» Language
![Java](https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=openjdk&logoColor=white)

### âš™ Framework & Library
![Spring Boot](https://img.shields.io/badge/SpringBoot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)
![Spring Security](https://img.shields.io/badge/SpringSecurity-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white)
![Spring Data JPA](https://img.shields.io/badge/SpringDataJPA-6DB33F?style=for-the-badge&logo=hibernate&logoColor=white)
![Spring Batch](https://img.shields.io/badge/SpringBatch-6DB33F?style=for-the-badge&logo=spring&logoColor=white)
![Spring AI](https://img.shields.io/badge/SpringAI-6DB33F?style=for-the-badge&logo=spring&logoColor=white)

![JWT](https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white)
![Google OAuth](https://img.shields.io/badge/Google_OAuth2.0-4285F4?style=for-the-badge&logo=google&logoColor=white)
![Toss Payments](https://img.shields.io/badge/Toss_Payment-FF3B30?style=for-the-badge&logoColor=white)

![QueryDSL](https://img.shields.io/badge/QueryDSL-FF5722?style=for-the-badge)
![OpenFeign](https://img.shields.io/badge/OpenFeign-00CCFF?style=for-the-badge&logo=apache-feign&logoColor=white)

### ğŸ—„ Database & Search
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)
![H2](https://img.shields.io/badge/H2-00599C?style=for-the-badge&logo=h2&logoColor=white)

![Elasticsearch](https://img.shields.io/badge/Elasticsearch-005571?style=for-the-badge&logo=elasticsearch&logoColor=white)
![Logstash](https://img.shields.io/badge/Logstash-005571?style=for-the-badge&logo=logstash&logoColor=white)
![Kibana](https://img.shields.io/badge/Kibana-005571?style=for-the-badge&logo=kibana&logoColor=white)

### ğŸ›  Infra
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![Kubernetes](https://img.shields.io/badge/Kubernetes-326CE5?style=for-the-badge&logo=kubernetes&logoColor=white)
![GitHub Actions](https://img.shields.io/badge/GitHub_Actions-2088FF?style=for-the-badge&logo=github-actions&logoColor=white)

![AWS ECS](https://img.shields.io/badge/AWS%20ECS-FF9900?style=for-the-badge&logo=amazonaws&logoColor=white)
![Amazon S3](https://img.shields.io/badge/AmazonS3-569A31?style=for-the-badge&logo=amazons3&logoColor=white)
![Nginx Proxy Manager](https://img.shields.io/badge/Nginx_Proxy_Manager-009639?style=for-the-badge&logo=nginx&logoColor=white)

### ğŸŒ MSA & Messaging
![Eureka](https://img.shields.io/badge/Eureka-0061A8?style=for-the-badge&logo=netflix&logoColor=white)
![Spring Cloud Gateway](https://img.shields.io/badge/Spring_Cloud_Gateway-6DB33F?style=for-the-badge&logo=spring&logoColor=white)
![Kafka](https://img.shields.io/badge/Kafka-231F20?style=for-the-badge&logo=apache-kafka&logoColor=white)
![Kafka UI](https://img.shields.io/badge/Kafka_UI-231F20?style=for-the-badge&logo=apache-kafka&logoColor=white)

### ğŸ”§ Collaboration Tools
![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)
![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white)
![Slack](https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white)
![Zep](https://img.shields.io/badge/Zep-008080?style=for-the-badge&logo=artstation&logoColor=white)

![Canva](https://img.shields.io/badge/Canva-00C4CC?style=for-the-badge&logo=canva&logoColor=white)
![ERDCloud](https://img.shields.io/badge/ERDCloud-4A90E2?style=for-the-badge&logo=icloud&logoColor=white)
![Figma](https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white)

---

## ğŸ›ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway    â”‚ â† Spring Cloud Gateway + Eureka
â”‚   (Port 8082)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚          â”‚          â”‚          â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚Account â”‚ â”‚ Domain â”‚ â”‚Payment â”‚ â”‚Settle- â”‚ â”‚ Search â”‚ â”‚   AI   â”‚
â”‚Service â”‚ â”‚Service â”‚ â”‚Service â”‚ â”‚ment    â”‚ â”‚Service â”‚ â”‚Service â”‚
â”‚ :8080  â”‚ â”‚ :8081  â”‚ â”‚ :8084  â”‚ â”‚Service â”‚ â”‚        â”‚ â”‚        â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Kafka Event  â”‚
                    â”‚   Bus         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” í†µì‹  íŒ¨í„´
1. **Gateway â†’ Services**: ë¼ìš°íŒ… ë° `X-REQUEST-ID` í—¤ë” ì „ë‹¬
2. **Domain â†” Payment**: Feign Client (ì£¼ë¬¸-ê²°ì œ ì—°ë™)
3. **Domain â†’ Elasticsearch**: ìƒí’ˆ ê²€ìƒ‰ (More Like This, Function Score)
4. **Services â†’ Kafka**: ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰ (ì£¼ë¬¸, ì •ì‚°, ê²€ìƒ‰ íŒ¨í„´)
5. **Settlement â† Payment**: ë°°ì¹˜ ì¡°íšŒ (ì •ì‚° ë°ì´í„°)

---

## ğŸ“„ ì¶”ê°€ ë¬¸ì„œ

### ğŸ”— ERD
<img width="3280" height="2042" alt="image" src="https://github.com/user-attachments/assets/327e8d03-57f8-489a-a853-273bf79f8ac1" />

### ğŸ›ï¸ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜
<img width="1920" height="1080" alt="í”„ë¡œì íŠ¸ êµ¬ì¡°" src="https://github.com/user-attachments/assets/321c6951-3425-43b3-be92-f67be8143d76" />

### ğŸ“œ í”„ë¡œì íŠ¸ ê¸°íšì„œ
- [í”„ë¡œì íŠ¸ ê¸°íšì„œ ë°”ë¡œê°€ê¸°](https://www.notion.so/29f9d0051b9981e6a1a7d5421fd58f1e?source=copy_link)

### ğŸ“Œ API ëª…ì„¸ì„œ
- [API ëª…ì„¸ì„œ ë°”ë¡œê°€ê¸°](https://www.notion.so/API-Mock-Server-29f9d0051b99813299b8e88a68ac724c?source=copy_link)

### ê¸°ëŠ¥ ì •ì˜ì„œ
- [ê¸°ëŠ¥ ì •ì˜ì„œ ë°”ë¡œê°€ê¸°](https://www.notion.so/29f9d0051b9981438f59c43ef83877d6?source=copy_link)

---

## ğŸ“Š ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ í”Œë¡œìš°

### 1. íšŒì›ê°€ì… ë° ë¡œê·¸ì¸
<details>
<summary>ìƒì„¸ í”Œë¡œìš° ë³´ê¸°</summary>

```mermaid
flowchart LR
    A[ì†Œì…œ ë¡œê·¸ì¸ ì‹œë„] --> B{ì†Œì…œ ë¡œê·¸ì¸ ì„±ê³µ?}
    B -- ì•„ë‹ˆì˜¤ --> E[ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™]
    B -- ì˜ˆ --> C[ì¶”ê°€ ì •ë³´ ê¸°ì…]
    C --> D{ì¶”ê°€ ì •ë³´ ê¸°ì… ì„±ê³µ?}
    D -- ì˜ˆ --> F[í† í° ë°œí–‰]
    D -- ì•„ë‹ˆì˜¤ --> E[ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™]
```

**ì²˜ë¦¬ ê³¼ì •**
```
OAuth ì¸ì¦ â†’ isNewUser í™•ì¸ 
â†’ ì‹ ê·œ: ì¶”ê°€ ì •ë³´ ì…ë ¥ í›„ íšŒì›ê°€ì… API 
â†’ ê¸°ì¡´: í† í° ë°œê¸‰ (Access + Refresh)
```
</details>

### 2. ìƒí’ˆ êµ¬ë§¤ í”Œë¡œìš°
<details>
<summary>ìƒì„¸ í”Œë¡œìš° ë³´ê¸°</summary>

```mermaid
flowchart TD
    A[ìƒí’ˆ ê²€ìƒ‰/ì¡°íšŒ] --> B[ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€]
    B --> C[ì£¼ë¬¸ ìƒì„±]
    C --> D{ê²°ì œ ë°©ë²• ì„ íƒ}
    D -->|ì˜ˆì¹˜ê¸ˆ ì „ì•¡| E[ì˜ˆì¹˜ê¸ˆ ê²°ì œ]
    D -->|ë³µí•© ê²°ì œ| F[ì˜ˆì¹˜ê¸ˆ + Toss]
    D -->|PG ì „ì•¡| G[Toss ê²°ì œ]
    E --> H[ì£¼ë¬¸ ì™„ë£Œ]
    F --> H
    G --> H
    H --> I[êµ¬ë§¤ í™•ì •]
    I --> J[ë¦¬ë·° ì‘ì„±]
    I --> K[ì •ì‚° ì²˜ë¦¬]
```

**ì²˜ë¦¬ ê³¼ì •**
```
ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ â†’ ì£¼ë¬¸ ìƒì„± (PAYMENT_PENDING) 
â†’ ê²°ì œ ì¤€ë¹„ ì •ë³´ ì¡°íšŒ (ê¸ˆì•¡ + ì˜ˆì¹˜ê¸ˆ ì”ì•¡)
â†’ ê²°ì œ ìŠ¹ì¸ (ì˜ˆì¹˜ê¸ˆ ìš°ì„  ì°¨ê° â†’ ë¶€ì¡±ë¶„ PG)
â†’ ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸ (PAYMENT_COMPLETED)
â†’ êµ¬ë§¤ í™•ì • (PURCHASE_CONFIRMED)
â†’ ì •ì‚° ì´ë²¤íŠ¸ ë°œí–‰ â†’ ë¦¬ë·° ì‘ì„± ê°€ëŠ¥
```
</details>

### 3. ë³µí•© ê²°ì œ í”Œë¡œìš°
<details>
<summary>ìƒì„¸ í”Œë¡œìš° ë³´ê¸°</summary>

```mermaid
sequenceDiagram
    participant C as Client
    participant O as Order Service
    participant P as Payment Service
    participant D as Deposit Service
    participant T as Toss Payments

    C->>O: ì£¼ë¬¸ ìƒì„±
    O-->>C: orderId
    
    C->>P: ê²°ì œ ì¤€ë¹„ ì •ë³´ ì¡°íšŒ
    P->>O: ì£¼ë¬¸ ê¸ˆì•¡ ì¡°íšŒ
    P->>D: ì˜ˆì¹˜ê¸ˆ ì”ì•¡ ì¡°íšŒ
    P-->>C: amount, depositBalance
    
    C->>P: ê²°ì œ ìŠ¹ì¸ ìš”ì²­<br/>(usedDepositAmount í¬í•¨)
    
    alt ì˜ˆì¹˜ê¸ˆ ì‚¬ìš©
        P->>D: ì˜ˆì¹˜ê¸ˆ ì°¨ê°
        D-->>P: ì°¨ê° ì™„ë£Œ
    end
    
    alt ë¶€ì¡±ë¶„ ìˆìŒ
        P->>T: Toss ê²°ì œ ìŠ¹ì¸
        T-->>P: ìŠ¹ì¸ ì™„ë£Œ
    end
    
    P->>O: ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸<br/>(PAYMENT_COMPLETED)
    P-->>C: ê²°ì œ ì™„ë£Œ
```

**ë©±ë“±ì„± ë³´ì¥**
- ë™ì¼ `orderId`ë¡œ ì¤‘ë³µ ìš”ì²­ ì‹œ ê¸°ì¡´ ê²°ì œ ì •ë³´ ë°˜í™˜
- ì˜ˆì¹˜ê¸ˆ ì°¨ê° ì‹¤íŒ¨ ì‹œ ì „ì²´ ë¡¤ë°±
</details>

### 4. ì •ì‚° í”Œë¡œìš°
<details>
<summary>ìƒì„¸ í”Œë¡œìš° ë³´ê¸°</summary>

```mermaid
flowchart TD
    A[êµ¬ë§¤ í™•ì •] --> B[SettlementCreatedEvent]
    B --> C[ì •ì‚° ìƒì„±: PENDING]
    
    C --> D[ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰]
    D --> E{PENDING ì •ì‚° 100ê±´ ì¡°íšŒ}
    E -->|ì—†ìŒ| Z[ë°°ì¹˜ ì¢…ë£Œ]
    E -->|ìˆìŒ| F[DepositSettlementReadyEvent]
    
    F --> G[ì •ì‚° ìƒíƒœ: WAITING]
    G --> H{ì˜ˆì¹˜ê¸ˆ ì²˜ë¦¬}
    
    H -->|ì„±ê³µ| I[SettlementResultEvent: SUCCESS]
    H -->|ì‹¤íŒ¨| J[SettlementResultEvent: FAILED]
    
    I --> K[ì •ì‚° ìƒíƒœ: COMPLETED]
    J --> L[ì •ì‚° ìƒíƒœ: FAILED]
    
    L --> M[ì¬ì‹œë„ ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬]
    M --> N[FAILED â†’ PENDING ë³€ê²½]
    N --> D
```

**ì²˜ë¦¬ ê³¼ì •**
```
êµ¬ë§¤ í™•ì • â†’ Kafka ì´ë²¤íŠ¸ ë°œí–‰
â†’ Settlement Serviceì—ì„œ PENDING ìƒì„±
â†’ Spring Batch ìŠ¤ì¼€ì¤„ëŸ¬ (100ê±´ì”© ì²˜ë¦¬)
â†’ ì˜ˆì¹˜ê¸ˆ ì„œë¹„ìŠ¤ë¡œ ì •ì‚° ìš”ì²­ ì´ë²¤íŠ¸ ë°œí–‰
â†’ ì˜ˆì¹˜ê¸ˆ ë°˜ì˜ í›„ ê²°ê³¼ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
â†’ COMPLETED/FAILED ì²˜ë¦¬
â†’ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë°°ì¹˜ë¡œ ë³µêµ¬
```
</details>

### 5. ê²€ìƒ‰ ë° ì¶”ì²œ í”Œë¡œìš°
<details>
<summary>ìƒì„¸ í”Œë¡œìš° ë³´ê¸°</summary>

```mermaid
flowchart TD
    A[ê²€ìƒ‰ì–´ ì…ë ¥] --> B{ì…ë ¥ê°’ ê²€ì¦}
    B -->|ë¹„ì–´ìˆìŒ| C[ìµœê·¼ ê²€ìƒ‰ì–´ ì¡°íšŒ]
    B -->|ì…ë ¥ê°’ ìˆìŒ| D[Elasticsearch ê²€ìƒ‰]
    
    D --> E[ìƒí’ˆ ëª©ë¡ ë°˜í™˜]
    E --> F[Redisì— ê²€ìƒ‰ì–´ ì €ì¥]
    F --> G{ì‚¬ìš©ì ë¡œê·¸ì¸?}
    
    G -->|ì˜ˆ| H[ê°œì¸ ìµœê·¼ ê²€ìƒ‰ì–´ ì €ì¥]
    G -->|ì•„ë‹ˆì˜¤| I[ì¸ê¸° ê²€ìƒ‰ì–´ ì§‘ê³„ë§Œ]
    
    H --> J[AI ì¶”ì²œ ì´ë²¤íŠ¸ ë°œí–‰]
    J --> K[ê²€ìƒ‰ íŒ¨í„´ ë¶„ì„]
    
    C --> L[ìë™ì™„ì„± ì œê³µ]
    D --> M{ìœ ì‚¬ ìƒí’ˆ ì¶”ì²œ?}
    M -->|ì˜ˆ| N[More Like This Query]
    M -->|ì•„ë‹ˆì˜¤| O[ì¼ë°˜ ê²€ìƒ‰ ê²°ê³¼]
```

**ì²˜ë¦¬ ê³¼ì •**
```
ê²€ìƒ‰ì–´ ì…ë ¥ â†’ Elasticsearch í†µí•© ê²€ìƒ‰
â†’ Redis ì €ì¥ (ìµœê·¼ ê²€ìƒ‰ì–´ + ì¸ê¸° ê²€ìƒ‰ì–´)
â†’ ë¡œê·¸ì¸ ì‚¬ìš©ì: AI ì´ë²¤íŠ¸ ë°œí–‰
â†’ ìë™ì™„ì„± ì œê³µ (ì ‘ë‘ì‚¬ ë§¤ì¹­)
â†’ ìœ ì‚¬ ìƒí’ˆ: More Like This ì¿¼ë¦¬
â†’ ì˜¤ëŠ˜ì˜ ì¶”ì²œ: Function Score ê³„ì‚°
```
</details>

---

## ğŸ”‘ ì£¼ìš” ê¸°ìˆ  êµ¬í˜„ íŠ¹ì§•

### 1. ë©±ë“±ì„± ë³´ì¥ ì‹œìŠ¤í…œ
- **ê²°ì œ**: `orderId` ê¸°ë°˜ ì¤‘ë³µ ìš”ì²­ ì°¨ë‹¨
- **ì •ì‚°**: ì´ë²¤íŠ¸ ì¬ë°œí–‰ ì‹œ ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€

### 2. ë³µí•© ê²°ì œ ì²˜ë¦¬
```java
// ì˜ˆì¹˜ê¸ˆ ìš°ì„  ì°¨ê° â†’ ë¶€ì¡±ë¶„ Toss ìŠ¹ì¸
1. ì˜ˆì¹˜ê¸ˆ ì‚¬ìš©ì•¡ ì°¨ê°
2. ë‚¨ì€ ê¸ˆì•¡ Tossë¡œ ìŠ¹ì¸ ìš”ì²­
3. ëª¨ë‘ ì„±ê³µ ì‹œ ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸
4. ì‹¤íŒ¨ ì‹œ ì „ì²´ ë¡¤ë°±
```

### 3. Elasticsearch ê³ ê¸‰ ì¿¼ë¦¬
- **More Like This**: ìœ ì‚¬ ìƒí’ˆ ì¶”ì²œ
- **Function Score**: ì¼ì¼ ì¶”ì²œ ìƒí’ˆ (ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ìµœì‹ ì„± ê°€ì¤‘ì¹˜)
- **Autocomplete**: Nori í˜•íƒœì†Œ ë¶„ì„ê¸° + Edge NGram

### 4. Spring Batch ë°°ì¹˜ ì²˜ë¦¬
- **Chunk ë°©ì‹**: 100ê±´ì”© ì½ê¸°-ì²˜ë¦¬-ì“°ê¸°
- **ì¬ì‹œë„ ë¡œì§**: FAILED ì •ì‚° ìë™ ì¬ì²˜ë¦¬
- **ìŠ¤ì¼€ì¤„ë§**: Cron í‘œí˜„ì‹ ê¸°ë°˜ ì£¼ê¸°ì  ì‹¤í–‰

### 5. Kafka ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹ 
```
purchase-confirmed â†’ settlement-created
settlement-ready â†’ deposit-processed
settlement-result â†’ settlement-completed/failed
```

### 6. Redis í™œìš©
- **í† í° ê´€ë¦¬**: Refresh Token ì €ì¥ (TTL ì„¤ì •)
- **ê²€ìƒ‰ì–´**: ìµœê·¼ ê²€ìƒ‰ì–´ (Sorted Set) + ì¸ê¸° ê²€ìƒ‰ì–´ (Hash)
- **ì„¸ì…˜**: ì¸ì¦ ì½”ë“œ ì„ì‹œ ì €ì¥ (5ë¶„ TTL)

---

## í”Œë¡œìš° ì°¨íŠ¸

<details>
<summary>ë¡œê·¸ì¸</summary>

```mermaid
flowchart LR
    A[ì†Œì…œ ë¡œê·¸ì¸ ì‹œë„] --> B{ì†Œì…œ ë¡œê·¸ì¸}
    B -- ì˜ˆ --> C[í† í° ë°œí–‰]
    B -- ì•„ë‹ˆì˜¤ --> D[ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™]
```
</details>

<details>
<summary>ë¡œê·¸ì•„ì›ƒ</summary>

```mermaid
flowchart LR
    A[ë¡œê·¸ì•„ì›ƒ] --> B[access token ì¿ í‚¤ íŒŒê´´] --> C[redisì—ì„œ ë¦¬í”„ë ˆì‹œ í† í° ì‚­ì œ]--> D[ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™]
```
</details>

<details>
<summary>Access Token ì¬ë°œê¸‰</summary>

```mermaid
flowchart LR
    A[access token ìœ íš¨ ì‹œê°„ ë§Œë£Œ] --> B[access token ì¬ë°œê¸‰ ìš”ì²­ with refresh token] --> C[ì„œë²„ì—ì„œ refresh token ì¼ì¹˜ í™•ì¸] --> D{ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™}
    D -- ì˜ˆ --> E[Access Token ë°œí–‰]
    D -- ì•„ë‹ˆì˜¤ --> F[ì˜ˆì™¸ ì²˜ë¦¬]
```
</details>

<details>
<summary>íŒë§¤ì ë“±ë¡</summary>

```mermaid
flowchart LR
    A[ë¡œê·¸ì¸] --> B[íŒë§¤ì ë“±ë¡ sms ì¸ì¦] --> C{"ê²€ì¦(ìµœëŒ€ 5ë²ˆ ì‹œë„ ì œí•œ)"}
    C -- ì˜ˆ --> D[íŒë§¤ì ê¶Œí•œ ì—…ë°ì´íŠ¸]
    C -- ì•„ë‹ˆì˜¤ --> F[ì˜ˆì™¸ ì²˜ë¦¬]
```
</details>

<details>
<summary>íŒë§¤ì ë¦¬ë·°</summary>

```mermaid
flowchart TD
    A[ë§ˆì´í˜ì´ì§€ - ì£¼ë¬¸ ëª©ë¡]
    --> D[ì£¼ë¬¸ ìƒì„¸]
    D --> F[ë¦¬ë·° ì‘ì„±]
    F -- í‰ì  ì—…ë°ì´íŠ¸ --> P[ë¦¬ë·° ì‘ì„± ì™„ë£Œ]
    P --> S[íŒë§¤ìì—ê²Œ ì•Œë¦¼]
```
</details>

<details>
<summary>ìƒí’ˆ ë“±ë¡</summary>

```mermaid
flowchart TD
    A[ìƒí’ˆ ë“±ë¡ ì‹œì‘] --> B{ë¡œê·¸ì¸ í™•ì¸}
    B -- ë¯¸ë¡œê·¸ì¸ --> C[ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™]
    B -- ë¡œê·¸ì¸ --> D[ìƒí’ˆ ì •ë³´ ì…ë ¥]
    D -- ì¹´í…Œê³ ë¦¬, ë¸Œëœë“œ, ê°€ê²©, ìƒíƒœ, ì´ë¯¸ì§€ --> L[ë“±ë¡ ì™„ë£Œ]
    L --> M[ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ì´ë™]
```
</details>

<details>
<summary>ìƒí’ˆ ì¡°íšŒ ë° êµ¬ë§¤</summary>

```mermaid
flowchart TD
    A[ìƒí’ˆ ëª©ë¡ ì¡°íšŒ]
    --ì¹´í…Œê³ ë¦¬/ê²€ìƒ‰ í•„í„°-->
    D[ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ]
    D --> E[ìƒí’ˆ í´ë¦­]
    E -- ì¡°íšŒìˆ˜ ì¦ê°€ --> G[ìƒí’ˆ ìƒì„¸ ì •ë³´ í‘œì‹œ]
    G --> H{ì‚¬ìš©ì ì•¡ì…˜}
    H -- ê´€ì‹¬ìƒí’ˆ --> I[wish_list ì €ì¥]
    H -- ì¥ë°”êµ¬ë‹ˆ --> K[Cart_Items ì¶”ê°€]
    H -- ë°”ë¡œêµ¬ë§¤ --> N[ì£¼ë¬¸ì„œ ì‘ì„±]
    K --> O[ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€]
    N --> P[ê²°ì œ í”„ë¡œì„¸ìŠ¤]
```
</details>

<details>
<summary>ê²°ì œ</summary>

```mermaid
flowchart TD
    A[ì¥ë°”êµ¬ë‹ˆ] --> B1[ìƒí’ˆ ì„ íƒ]
    B1 --> B2[ì£¼ë¬¸ì„œ ì‘ì„±]
    B2 --> B[ì£¼ë¬¸ ëŒ€ê¸° ìƒíƒœ]
    B --> C[ê²°ì œ ì •ë³´ ì…ë ¥]

    C -->|ì„±ê³µ| H[ê²°ì œ ì™„ë£Œ]
    H -->|ë°°ì†¡| Q[êµ¬ë§¤ í™•ì •]
    C -->|ì‹¤íŒ¨| I[ì£¼ë¬¸ ëŒ€ê¸°]
    I --> B
```
</details>

<details>
<summary>ì •ì‚°</summary>

```mermaid
flowchart TD
    A[ì£¼ë¬¸ ì•„ì´í…œ êµ¬ë§¤í™•ì •] --> B[ì£¼ë¬¸ ì„œë¹„ìŠ¤ - SettlementCreatedEvent ë°œí–‰]
    B --> C[ì •ì‚° ì„œë¹„ìŠ¤ Consumer - SettlementCreatedEvent ìˆ˜ì‹ ]
    C --> D[ì •ì‚° ì—”í‹°í‹° ìƒì„± - ìƒíƒœ PENDING]

    D --> E[ì •ì‚° ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ - processPendingSettlements ì‹¤í–‰]
    E --> F{PENDING ì •ì‚° ìˆìŒ?}
    F -->|ì—†ìŒ| Z[ë°°ì¹˜ ì¢…ë£Œ]

    F -->|ìˆìŒ| G[ìµœëŒ€ 100ê±´ ì¡°íšŒ]
    G --> H[DepositSettlementReadyEvent ë°œí–‰ userId, netAmount, settlementId]
    H --> I[ì •ì‚° ìƒíƒœ WAITINGìœ¼ë¡œ ì—…ë°ì´íŠ¸]
```

```mermaid
flowchart TD
    J[ì˜ˆì¹˜ê¸ˆ ì„œë¹„ìŠ¤ Consumer - ì •ì‚° ì¤€ë¹„ ì´ë²¤íŠ¸ ìˆ˜ì‹ ]
    J --> K{ì˜ˆì¹˜ê¸ˆ ì²˜ë¦¬ ì„±ê³µ?}

    K -->|ì„±ê³µ| L[ì˜ˆì¹˜ê¸ˆ ì„œë¹„ìŠ¤ - SettlementResultEventì„±ê³µ ë°œí–‰]
    K -->|ì‹¤íŒ¨| M[ì˜ˆì¹˜ê¸ˆ ì„œë¹„ìŠ¤ - SettlementResultEventì‹¤íŒ¨ ë°œí–‰]

    L --> N[ì •ì‚° ì„œë¹„ìŠ¤ Consumer - ìƒíƒœ COMPLETED]
    M --> O[ì •ì‚° ì„œë¹„ìŠ¤ Consumer - ìƒíƒœ FAILED]

    O --> P[ì¬ì‹œë„ ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ - retryFailedSettlements ì‹¤í–‰]
    P --> Q[FAILED ì •ì‚° ì¡°íšŒ]
    Q --> R{ì¬ì‹œë„ ëŒ€ìƒ ìˆìŒ?}
    R -->|ì—†ìŒ| Z[ë°°ì¹˜ ì¢…ë£Œ]
    R -->|ìˆìŒ| S[FAILEDë¥¼ PENDINGìœ¼ë¡œ ë³€ê²½]
    S --> E[ë°°ì¹˜ ìŠ¤ì¼€ì¥´ëŸ¬ ë‹¤ì‹œ ì‹¤í–‰]
```
</details>

<details>
<summary>ìƒí’ˆ ê²€ìƒ‰</summary>

```mermaid
flowchart TD
    A[Start] --> B{ì…ë ¥ê°’ì´ ë¹„ì–´ìˆëŠ”ê°€?}
    B -->|Yes| C[ìµœê·¼ ê²€ìƒ‰ì–´ ì¡°íšŒ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜]
    C --> D[end]

    B -->|No| F[í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ì…ë ¥ê°’ì„ ì¿¼í‹° í‚¤ë³´ë“œ ì…ë ¥ê°’ìœ¼ë¡œ ë³€í™˜]

    F{í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ì…ë ¥ê°’ì´ ì˜ì–´ì¸ê°€?}
    F -->|No| G[í•œê¸€ë¡œ ê²€ìƒ‰ ì²˜ë¦¬]

    F -->|Yes| H{ì‚¬ì „ì— ì¡´ì¬í•˜ëŠ” ì˜ì–´ì¸ê°€?}
    H -->|Yes| I[ì‚¬ì „ì— ìˆëŠ” ì˜ì–´ ë‹¨ì–´ ê²€ìƒ‰]
    H -->|No| J[ì‚¬ì „ì— ì—†ëŠ” ì˜ì–´ ë‹¨ì–´ ê²€ìƒ‰]

    G --> K[ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜]
    I --> K
    J --> K

    K --> L[SearchWordResponseë¡œ ë§¤í•‘]
    L --> M[ResponseList ë°˜í™˜]
    M --> N[End]
```
</details>

<details>
<summary>ê²°ì œ ì‹œìŠ¤í…œ</summary>

```mermaid
flowchart TD
    A[ì¥ë°”êµ¬ë‹ˆì—ì„œ ì£¼ë¬¸í•˜ê¸°] --> B[ì£¼ë¬¸ ìƒì„±<br/>Order: PAYMENT_PENDING]
    B --> C[ê²°ì œ ì‹œë„]
    C -->|ê²°ì œ ì„±ê³µ| D[Order: PAYMENT_COMPLETED]
    C -->|ì‹¤íŒ¨| B

    D --> E[êµ¬ë§¤í™•ì • í´ë¦­<br/>Order: PURCHASE_CONFIRMED]
    D --> F[ì·¨ì†Œ/í™˜ë¶ˆ ìš”ì²­]
```

```mermaid
sequenceDiagram
    participant D_Order as ë„ë©”ì¸ ì„œë¹„ìŠ¤(ì£¼ë¬¸, ì˜ˆì¹˜ê¸ˆ)
    participant S as ì •ì‚° ì„œë¹„ìŠ¤

    %% 1. êµ¬ë§¤í™•ì • â†’ purchase-confirmed
    D_Order->>S: purchase-confirmed ì´ë²¤íŠ¸ ì „ì†¡
    S->>S: ì •ì‚° ìƒì„±, ì •ì‚° ìƒíƒœ = PENDING

    %% 2. ë°°ì¹˜ ì‹œì  â†’ settlement-ready
    note over S: ë°°ì¹˜ ìŠ¤ì¼€ì¤„ë§ ì‹œì <br/>(PENDING ì •ì‚° 100ê°œì”© ì¡°íšŒ)
    S->>D_Order: settlement-ready ì´ë²¤íŠ¸ ì „ì†¡

    %% 3. ì˜ˆì¹˜ê¸ˆ ì²˜ë¦¬ í›„ ê²°ê³¼ ì´ë²¤íŠ¸
    D_Order->>D_Order: ì˜ˆì¹˜ê¸ˆ ë°˜ì˜/ì €ì¥<br/>(DepositService.processSettlement)

    alt ì˜ˆì¹˜ê¸ˆ ì²˜ë¦¬ ì„±ê³µ
        D_Order->>S: settlement-completed ì´ë²¤íŠ¸ ì „ì†¡
        S->>S: ì •ì‚° ìƒíƒœ = COMPLETED
    else ì˜ˆì¹˜ê¸ˆ ì²˜ë¦¬ ì‹¤íŒ¨
        D_Order->>S: settlement-failed ì´ë²¤íŠ¸ ì „ì†¡
        S->>S: ì •ì‚° ìƒíƒœ = FAILED<br/>â†’ ì¬ì‹œë„ ë°°ì¹˜ ëŒ€ìƒ
    end
```
</details>

<details>
<summary>ìƒí’ˆ ë¬¸ì˜</summary>

```mermaid
flowchart TD
    T{ì‚¬ìš©ì} -->
    A[ìƒí’ˆ ìƒì„¸ í˜ì´ì§€]
    --> B[ë¬¸ì˜í•˜ê¸° ë²„íŠ¼ í´ë¦­]
    B --> F[ë¬¸ì˜ ë‚´ìš© ì…ë ¥]
    F --> I[Comments ì €ì¥]
   
    K{íŒë§¤ì}
    K --> X[ì‘ì„±ëœ ë¬¸ì˜ê¸€ ëª©ë¡] 
    --> L[ë¬¸ì˜ ê¸€ ë‹µë³€ ì‘ì„±]
    --> Q[ë‹µë³€ ì™„ë£Œ]
    Q --> R[êµ¬ë§¤ìì—ê²Œ ì•Œë¦¼]
```
</details>

---

## ğŸ™ íšŒê³ 

ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ MSA í™˜ê²½ì—ì„œì˜ **ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**, **ë³µí•© ê²°ì œ ì‹œìŠ¤í…œ**, **Elasticsearch ê²€ìƒ‰ ìµœì í™”**, **Spring Batch ë°°ì¹˜ ì²˜ë¦¬** ë“± ì‹¤ë¬´ì—ì„œ ì¤‘ìš”í•œ ê¸°ìˆ ë“¤ì„ í•™ìŠµí•˜ê³  ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ **ì•½ 80ê°œì˜ APIë¥¼ 6ê°œì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬**í•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜í•˜ë©´ì„œ, Kafkaë¥¼ í†µí•œ ëŠìŠ¨í•œ ê²°í•©ê³¼ Spring Cloud Gatewayë¥¼ í†µí•œ íš¨ìœ¨ì ì¸ ë¼ìš°íŒ…ì„ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.

---

**Made with â¤ï¸ by Team Ctrl+Z**